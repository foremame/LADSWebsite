<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Add New Banner</title>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <script type="text/javascript" th:src="@{/js/CommonMethods.js}"></script>
</head>
<body>
<div class="container">
    <form name="playerCardForm" action="/playerCard/update" method="post">
        <div class="form-group" id="cardListDiv">
            <label for="cardNameSearch">Card Name:</label>
            <input type="text" id="cardNameSearch" onkeyup="searchForName('cardNameSearch','playerCardsUL')" placeholder="Search for card name..">
            <ul id="playerCardsUL">
                <li th:each="playerCard: ${playerCards}" style="display:none">
                    <input type="radio" th:id="${playerCard.id}" name="playerCardId" th:value="${playerCard.id}">
                    <label th:for="${playerCard.id}" th:text="${playerCard.card.name}"></label>
                </li>
            </ul>
        </div>
        <div class="form-group" id="rankTypeDiv" style="display:none">
            <label for="rankType">Card Rank:</label>
            <select id="rankType" name="rankType">
                <option value="">--Please Choose An Option--</option>
                <option th:each="rankType : ${rankTypes}" th:value="${rankType}" th:text="${rankType}"></option>
            </select>
        </div>
        <div class="form-group" id="cardLevelDiv" style="display:none">
            <label for="cardLevel">Level:</label>
            <input type="number" id="cardLevel" name="level" required>
        </div>
        <div class="form-group" id="awakenedDiv" style="display:none">
            <input type="checkbox" id="awakened" name="awakened">
            <label for="awakened"> Card Is Awakened</label>
        </div>
        <button style="display:none" id="submit" class="submit" type="submit">Submit</button>
    </form>
</div>
<script th:inline="javascript" type="text/javascript">

    $("input[name='playerCardId']").change( function() {
        url_get("/playerCard/getPlayerCardInfoById", {"playerCardId" : $(this).val()}).done( function(msg) {
            var playerCard = JSON.parse(msg);
            $("#rankType").val(playerCard["rankType"]);
            $("#cardLevel").val(Number(playerCard["level"]));
            $("#awakened")[0].checked = playerCard["awakened"] == "true" ? true : false;

            $("#rankTypeDiv").show();
            $("#cardLevelDiv").show();
            $("#awakenedDiv").show();
            $("#submit").show();
        });
    });
</script>
</body>
</html>