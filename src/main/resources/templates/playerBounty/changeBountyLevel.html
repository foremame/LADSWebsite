<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Update Bounty Level</title>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <script type="text/javascript" th:src="@{/js/CommonMethods.js}"></script>
</head>
<body>
<div class="container">
    <div id="errorDiv" style="display:none">
    </div>
    <form name="changeBountyLevelForm" action="/playerBounty/update" method="post">
        <div class="form-group" id="bountyNameDiv">
            <label for="bountyName">Bounty:</label>
            <select id="bountyName" name="bountyName">
                <option value="">--Please Choose An Option--</option>
                <option th:each="bountyName : ${bountyNames}" th:value="${bountyName}" th:text="${bountyName}"></option>
            </select>
        </div>
        <div class="form-group" id="bountyLevelDiv">
            <label for="bountyLevel">Highest Bounty Level:</label>
            <input type="number" id="bountyLevel" name="level" required>
        </div>
        <button id="btnSubmit" class="submit" type="submit">Submit</button>
    </form>
</div>
<script th:inline="javascript" type="text/javascript">

    $("form").submit(function(e) {
        e.preventDefault();
        $("#errorDiv").hide();
        $("#errorDiv").empty();

        var form = this;
        var issue = false;
        var errorText = "";

        if ($("#bountyLevel").val() < 1 || $("#bountyLevel").val() > 9) {
            issue = true;
            errorText += "<p>Invalid bounty level, please choose a level between 1 - 9.</p>";
        }
        if($("#bountyName").val() == "") {
            issue = true;
            errorText += "<p>Please select a bounty.</p>";
        }

        if (issue == true) {
            $("#errorDiv").append(errorText);
            $("#errorDiv").show();
        }
        else {
            form.submit();
        }
    });
</script>
</body>
</html>